<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arch Angels Dashboard</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(to right, #ff7f00, #e03e2d);
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
        }

        .login-box {
            text-align: center;
        }

        .login-btn {
            background-color: #00aaff;
            color: white;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
        }

        .dashboard {
            display: flex;
            width: 100%;
        }

        .sidebar {
            background-color: #ff7f00;
            width: 200px;
            height: 100vh;
            padding: 20px;
        }

        .content {
            flex-grow: 1;
            padding: 20px;
            background: #2c3e50;
        }

        .logout-btn {
            background-color: #e03e2d;
            color: white;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }

        .raid-box {
            background: #444;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            display: none;
        }

        .raid-title {
            font-size: 20px;
            font-weight: bold;
        }

        .raid-description {
            font-size: 16px;
        }

        .raid-footer {
            font-size: 14px;
            margin-top: 10px;
        }

        .command-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .command-box {
            background: #444;
            padding: 15px;
            border-radius: 8px;
        }

        .command-title {
            font-weight: bold;
        }

        .command-description {
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- Login Box -->
    <div class="login-box" id="login-box">
        <h1>Welcome to Arch Angels</h1>
        <a href="/oauth2/login" class="login-btn">Log In</a>
    </div>

    <!-- Dashboard after Login -->
    <div class="dashboard" id="dashboard" style="display: none;">
        <div class="sidebar">
            <h2>Arch Angels</h2>
            <button id="current-raid-btn">Current Raid</button><br>
            <button id="commands-btn">Commands</button><br>
            <button id="leaderboard-btn">Leaderboard</button><br>
            <button class="logout-btn" onclick="logout()">Log Out</button>
        </div>
        <div class="content">
            <div id="welcome-message"></div>
            <div id="current-raid" style="display: none;"></div>
            <div id="commands" style="display: none;">
                <h2>Bot Commands</h2>
                <div id="economy-commands"></div>
                <div id="gambling-commands"></div>
                <div id="grind-commands"></div>
            </div>
            <div id="leaderboard" style="display: none;">
                <h2>Leaderboard</h2>
                <div id="leaderboard-container">Loading...</div>
            </div>
        </div>
    </div>

    <script>
        const userData = {
            username: 'User',
            avatarUrl: 'https://www.example.com/avatar.png',
            displayName: 'User#1234',
            commands: {
                economy: [
                    { name: '/balance', description: 'Check your account balance' },
                    { name: '/daily', description: 'Claim your daily reward of $100!' },
                    { name: '/leaderboard', description: 'See the top 10 users' },
                ],
                gambling: [
                    { name: '/slots', description: 'Play slots and win!' },
                    { name: '/coinflip', description: 'Flip a coin' },
                ],
                grind: [
                    { name: '!key', description: 'Ping the Key Farm role' },
                    { name: '!desert', description: 'Ping the Desert role' },
                ]
            },
            admin: false, // You can set this dynamically from backend
        };

        const raidStatus = [
            { raid: 'snow_island', status: 'Not started' },
            { raid: 'jungle_island', status: 'Not started' },
            { raid: 'dedu_island', status: 'Not started' }
        ];

        function logout() {
            window.location.href = "/logout";  // Redirect to logout route
        }

        function showDashboard() {
            document.getElementById('login-box').style.display = 'none';
            document.getElementById('dashboard').style.display = 'flex';
            document.getElementById('welcome-message').innerHTML = `
                <h2>Welcome, ${userData.displayName}</h2>
                <img src="${userData.avatarUrl}" alt="Avatar">
            `;

            displayCommands(userData.commands);
        }

        function displayCommands(commands) {
            let economyHTML = '';
            commands.economy.forEach(cmd => {
                economyHTML += `<div class="command-box"><div class="command-title">${cmd.name}</div><div class="command-description">${cmd.description}</div></div>`;
            });
            document.getElementById('economy-commands').innerHTML = economyHTML;

            let gamblingHTML = '';
            commands.gambling.forEach(cmd => {
                gamblingHTML += `<div class="command-box"><div class="command-title">${cmd.name}</div><div class="command-description">${cmd.description}</div></div>`;
            });
            document.getElementById('gambling-commands').innerHTML = gamblingHTML;

            let grindHTML = '';
            commands.grind.forEach(cmd => {
                grindHTML += `<div class="command-box"><div class="command-title">${cmd.name}</div><div class="command-description">${cmd.description}</div></div>`;
            });
            document.getElementById('grind-commands').innerHTML = grindHTML;
        }

        function showRaidStatus() {
            document.getElementById('commands').style.display = 'none';
            document.getElementById('leaderboard').style.display = 'none';
            document.getElementById('current-raid').style.display = 'block';

            raidStatus.forEach(raid => {
                const raidBox = document.createElement('div');
                raidBox.className = 'raid-box';
                raidBox.innerHTML = `
                    <div class="raid-title">${raid.raid} Raid</div>
                    <div class="raid-description">${raid.status}</div>
                `;
                document.getElementById('current-raid').appendChild(raidBox);
            });
        }

        document.getElementById('current-raid-btn').addEventListener('click', showRaidStatus);
        document.getElementById('commands-btn').addEventListener('click', () => {
            document.getElementById('current-raid').style.display = 'none';
            document.getElementById('leaderboard').style.display = 'none';
            document.getElementById('commands').style.display = 'block';
        });

        document.getElementById('leaderboard-btn').addEventListener('click', () => {
            document.getElementById('current-raid').style.display = 'none';
            document.getElementById('commands').style.display = 'none';
            document.getElementById('leaderboard').style.display = 'block';
            // Fetch leaderboard data (from backend)
            fetch('/leaderboard')
                .then(response => response.json())
                .then(data => {
                    const leaderboardContainer = document.getElementById('leaderboard-container');
                    leaderboardContainer.innerHTML = '';
                    data.forEach(user => {
                        const userDiv = document.createElement('div');
                        userDiv.classList.add('leaderboard-entry');
                        userDiv.innerHTML = `
                            <strong>${user.rank}. ${user.name}</strong>
                            <p>ðŸ’° ${user.balance} Baddies</p>
                        `;
                        leaderboardContainer.appendChild(userDiv);
                    });
                })
                .catch(err => console.error('Error fetching leaderboard:', err));
        });

        // Simulate login
        localStorage.setItem('loggedIn', 'true'); // Simulate login
        if (localStorage.getItem('loggedIn') === 'true') {
            showDashboard();
        }
    </script>
</body>
</html>
